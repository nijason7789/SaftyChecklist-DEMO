.foundation-stage-form-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  background-color: var(--background-color);
  color: var(--text-color);
  font-family: var(--font-family);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.form-header {
  margin-bottom: 8px;
}

.form-header h1 {
  font-size: 24px;
  margin-bottom: 8px;
}

.form-header h2 {
  font-size: 20px;
  font-weight: normal;
}

.inspection-form {
  border: 1px solid var(--border-color);
  padding: 20px;
  border-radius: 8px;
  background-color: var(--card-background);
  width: 100%;
  box-sizing: border-box;
}

.form-field {
  margin-bottom: 10px;
}

.auto-filled {
  background-color: #f5f5f5;
  padding: 8px;
  border-radius: 4px;
  border: 1px solid #ddd;
  color: #2e2c2c;
}

.site-display,
.inspector-display {
  min-height: 8px;
  line-height: 8px;
  font-weight: normal;
  display: inline-block;
}

.form-group {
  margin-bottom: 16px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: bold;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background-color: var(--input-background);
  color: var(--text-color);
}

.form-group textarea {
  resize: vertical;
  min-height: 80px;
}

.error-message {
  color: var(--error-color);
  font-size: 14px;
  margin-top: 4px;
}

.inspection-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

.inspection-table th,
.inspection-table td {
  border: 1px solid var(--border-color);
  padding: 8px;
  text-align: left;
}

.inspection-table th {
  background-color: var(--table-header-background);
  font-weight: bold;
}

.inspection-table tr:nth-child(even) {
  background-color: var(--table-row-alternate);
}

.inspection-table input[type="radio"] {
  width: auto;
  margin: 0 auto;
  display: block;
}

.inspection-table input[type="text"] {
  width: 100%;
  padding: 4px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background-color: var(--input-background);
  color: var(--text-color);
}

.signature-photo-container {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
}

.photo-upload,
.signature-area {
  flex: 1;
  border: 1px solid var(--border-color);
  padding: 16px;
  border-radius: 4px;
}

.photo-upload h3,
.signature-area h3 {
  margin-top: 0;
  margin-bottom: 12px;
  font-size: 16px;
  text-align: center;
}

.photo-preview {
  margin-top: 12px;
  text-align: center;
}

.photo-preview img {
  max-width: 100%;
  max-height: 300px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  margin-top: 8px;
}

.photo-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 15px;
}

.photo-input {
  display: none;
}

.camera-button {
  display: inline-block;
  background-color: var(--primary-color, #4a90e2);
  color: white;
  padding: 10px 15px;
  border-radius: 4px;
  cursor: pointer;
  text-align: center;
  font-weight: bold;
  transition: background-color 0.3s ease;
}

.camera-button:hover {
  background-color: var(--primary-dark-color, #3a7bc8);
}

.signature-display {
  border: 1px dashed var(--border-color);
  height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 8px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.signature-display:hover {
  background-color: rgba(74, 144, 226, 0.05);
  border-color: var(--primary-color, #4a90e2);
}

.signature-placeholder {
  color: var(--text-secondary);
  text-align: center;
}

.signature-display img {
  max-width: 100%;
  max-height: 100%;
}

.form-actions {
  display: flex;
  gap: 12px;
  margin-top: 20px;
  justify-content: flex-end;
}

.form-number {
  margin-top: 20px;
  text-align: right;
  font-size: 12px;
  color: var(--text-secondary);
}

/* Signature Modal */
.signature-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.signature-modal-content {
  background-color: var(--card-background);
  padding: 20px;
  border-radius: 8px;
  width: 90%;
  max-width: 600px;
}

.signature-modal-content h3 {
  margin-top: 0;
  text-align: center;
  margin-bottom: 16px;
}

.signature-canvas {
  border: 1px solid var(--border-color);
  width: 100%;
  background-color: #fff;
  touch-action: none;
}

.signature-actions {
  margin-top: 16px;
  display: flex;
  justify-content: flex-end;
  gap: 12px;
}

/* Print styles */
@media print {
  /* 1. 隱藏頁面上的所有其他內容 */
  body * {
    visibility: hidden;
  }

  /* 2. 僅顯示你想要打印的表單容器及其所有子元素 */
  .foundation-stage-form-container,
  .foundation-stage-form-container * {
    visibility: visible;
  }

  /* 3. 將表單容器設置為頁面的頂部，並佔滿寬度 */
  .foundation-stage-form-container {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    padding: 10mm; /* 給打印內容一些邊距 */
    margin: 0;
    border: none !important;
    box-shadow: none !important;
    max-width: 100% !important; /* 覆蓋屏幕樣式中的 max-width */
    background-color: white !important; /* 確保背景是白色 */
    color: black !important; /* 確保文字是黑色 */
  }

  /* 4. 明確隱藏表單內部不需要打印的元素 */
  .form-actions,
  .dashboard-header, /* 假設 .dashboard-header 是存在的並需要隱藏 */
  input[type="file"],
  .signature-modal,
  button, /* 通常隱藏所有按鈕 */
  [data-no-print] /* 可以給不想打印的元素添加 data-no-print 屬性 */
  {
    display: none !important;
  }

  /* 5. 確保表單元素在打印時看起來合適 */
  .inspection-form {
    border: none !important;
    padding: 0 !important;
    box-shadow: none !important;
  }

  /* 確保輸入框和下拉框的值能被打印出來 */
  input, select, textarea {
    border: 1px solid #ccc !important;
    background-color: white !important;
    color: black !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  /* 移除簽名區域的交互樣式 */
  .signature-display {
    border-style: solid !important; /* 如果你希望打印時有邊框 */
    cursor: default !important;
    height: auto !important; /* 讓圖片決定高度 */
    min-height: 100px; /* 保持一個最小高度 */
  }
  .signature-display img {
    max-width: 100%;
    height: auto;
    display: block; /* 確保圖片正確顯示 */
  }
  .signature-display:hover {
    background-color: transparent !important;
    border-color: #ccc !important;
  }

  /* 隱藏簽名區域的佔位符文字 */
  .signature-placeholder {
    display: none !important;
  }

  /* 確保表格正確打印 */
  .inspection-table {
    width: 100% !important;
    border-collapse: collapse !important;
    page-break-inside: auto; /* 允許表格跨頁 */
  }
  .inspection-table th,
  .inspection-table td {
    border: 1px solid #666 !important; /* 使用深色邊框 */
    padding: 5px !important;
    page-break-inside: avoid; /* 盡量避免單元格內容跨頁 */
  }
  .inspection-table th {
    background-color: #f0f0f0 !important; /* 淺灰色表頭 */
  }

  /* 處理圖片預覽 */
  .photo-preview img {
    max-width: 200px !important; /* 限制打印時圖片大小 */
    max-height: 200px !important;
    border: 1px solid #ccc !important;
  }

  /* 新增：嘗試避免在這些元素內部斷頁 */
  .form-field, /* 針對表單中的每個欄位區塊 */
  .inspection-item, /* 假設您有這樣的 class 給每個巡檢項目 */
  .inspection-item-container, /* 或者類似的巡檢項目容器 class */
  .form-section, /* 如果您有更大的表單分區 */
  .photo-preview-container, /* 包含圖片和其相關信息的容器 */
  .signature-display, /* 簽名顯示區域 */
  .form-meta > div, /* 表單元數據中的直接子div，如日期、案場名稱 */
  p, /* 一般段落 */
  li /* 列表項目 */
  {
    page-break-inside: avoid !important; /* 嘗試避免在元素內部分頁 */
  }

  /* 如果有特定的備註區域，也可以單獨設定 */
  .notes-field-container, /* 假設備註欄位有一個容器 */
  textarea.form-input /* 直接對 textareas */
  {
    page-break-inside: avoid !important;
  }
}

/* Responsive styles */
@media (max-width: 768px) {
  .signature-photo-container {
    flex-direction: column;
  }

  .inspection-table {
    font-size: 14px;
  }

  .inspection-table th,
  .inspection-table td {
    padding: 6px 4px;
  }
}
